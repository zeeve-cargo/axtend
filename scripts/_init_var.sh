#!/bin/bash

# user specific
USER_PORT=${USER_PORT:-"30000"}
RELAY_IP=${RELAY_IP:-"127.0.0.1"}
ALLYCHAIN_IP=${ALLYCHAIN_IP:-"127.0.0.1"}

# generic build variables
SPECS_FOLDER=${SPECS_FOLDER:-"specs"}
BUILD_FOLDER=${BUILD_FOLDER:-"build"}
mkdir -p $BUILD_FOLDER
TMP_FOLDER=${TMP_FOLDER:-"$BUILD_FOLDER/tmp"}
mkdir -p $TMP_FOLDER

AXTEND_BINARY=${AXTEND_BINARY:-"target/release/axtend"}

# filename declarations
ALLYCHAIN_SPEC_TEMPLATE_FILENAME=${ALLYCHAIN_SPEC_TEMPLATE_FILENAME:-"allychain-specs-template.json"}
ALLYCHAIN_SPEC_PLAIN_FILENAME=${ALLYCHAIN_SPEC_PLAIN_FILENAME:-"allychain-specs-plain.json"}
ALLYCHAIN_SPEC_RAW_FILENAME=${ALLYCHAIN_SPEC_RAW_FILENAME:-"allychain-specs-raw.json"}
ALLYCHAIN_WASM_FILENAME=${ALLYCHAIN_WASM_FILENAME:-"allychain-runtime.wasm"}
ALLYCHAIN_GENESIS_FILENAME=${ALLYCHAIN_GENESIS_FILENAME:-"allychain-genesis.txt"}
BETANET_SPEC_TEMPLATE_FILENAME=${BETANET_SPEC_TEMPLATE_FILENAME:-"betanet-specs-template.json"}
BETANET_SPEC_PLAIN_FILENAME=${BETANET_SPEC_PLAIN_FILENAME:-"betanet-specs-plain.json"}
BETANET_SPEC_RAW_FILENAME=${BETANET_SPEC_RAW_FILENAME:-"betanet-specs-raw.json"}

# Generic network declarations
BETANET_LOCAL_RAW_SPEC=${BETANET_LOCAL_RAW_SPEC:-"$BUILD_FOLDER/betanet-specs-raw.json"}
COMMON_NODE_KEYS=(
  0000000000000000000000000000000000000000000000000000000000000000
  1111111111111111111111111111111111111111111111111111111111111111
  2222222222222222222222222222222222222222222222222222222222222222
  3333333333333333333333333333333333333333333333333333333333333333
  4444444444444444444444444444444444444444444444444444444444444444
  5555555555555555555555555555555555555555555555555555555555555555
  6666666666666666666666666666666666666666666666666666666666666666
)
COMMON_LOCAL_IDS=(
  12D3KooWDpJ7As7BWAwRMfu1VU2WCqNjvq387JEYKDBj4kx6nXTN
  12D3KooWPqT2nMDSiXUSx5D7fasaxhxKigVhcqfkKqrLghCq9jxz
  12D3KooWLdJAwPtyQ5RFnr9wGXsQzpf3P2SeqFbYkqbfVehLu4Ns
  12D3KooWBRFW3HkJCLKSWb4yG6iWRBpgNjbM4FFvNsL5T5JKTqrd
  12D3KooWQJzxKtEUvbt9BZ1uJyAMw2WSEQSShp4my4c3iikhW8Cf
  12D3KooWPBFzpNemfrwjMSTSENKAC6cDHxE2RXojcMJRwMtitDms
)
ALLYCHAIN_NODE_KEYS=(
  0000000000000000000000000000100000000000000000000000000000000000
  0000000000000000000000000000111111111111111111111111111111111111
  0000000000000000000000000000122222222222222222222222222222222222
  0000000000000000000000000000133333333333333333333333333333333333
  0000000000000000000000000000144444444444444444444444444444444444
  0000000000000000000000000000155555555555555555555555555555555555
  0000000000000000000000000000166666666666666666666666666666666666
  0000000000000000000000000000177777777777777777777777777777777777
  0000000000000000000000000000188888888888888888888888888888888888
  0000000000000000000000000000199999999999999999999999999999999999
)
ALLYCHAIN_LOCAL_IDS=(
  12D3KooWJ8BACzWs2x7yt1UozRrZrtcgUhpJrBbYrYqAQBa1ZXFN
  12D3KooWAZsNtba8pPJMYdbUUr9KFLQbFioPZKbpdNnbouSk6tto
  12D3KooWK5yfHLPADzZEKKzyqHjf3y5bi6jP6egNZL7aYp4us52E
  12D3KooWHtc11BNuNo9CbHb7MQS7NDue1qRjgnHbyyY8bo3Fu2L3
  12D3KooWDoaPdMd86ZPRTR9tmdw1qcdkdzLLWAXZSg5r4qWcyvZF
  12D3KooWHXyX7DHVr8nRHfbu7ct6Zyy4NEhciAzG6XqHRFC3zHEs
  12D3KooWAUHzje7vqkwBUTkiK8LMrMi52qgfyb8ouVpefo3tSXnk
  12D3KooWRjUyXkjqbmZ5XUiwrSz4fPrP3Q4wkhq7b2FZD8cRmDkm
  12D3KooWJ2sbvqxSA8D3VYa33XhhkmuZt58nxdWMKo2z3Mf3mafa
  12D3KooWNdXzpEDHHt6gnWx6RXc8J8YFZMhjQ154GDGHQBDNZZ9V
)
WELL_KNOWN_USERS=(
  "alice"
  "bob"
  "charlie"
  "dave"
  "eve"
  "ferdie"
)

# Alice is SUDO
BETANET_SUDO_SEED=${BETANET_SUDO_SEED:-"0xe5be9a5092b81bca64be81d212e7f2f9eba183bb7a90954f7b76361f6edb5c0a"}
BETANET_SUDO_ADDR=${BETANET_SUDO_ADDR:-"5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY"}

# Alphanet declarations
ALPHANET_BUILD_FOLDER=${ALPHANET_BUILD_FOLDER:-"$BUILD_FOLDER/alphanet"}
mkdir -p $ALPHANET_BUILD_FOLDER
ALPHANET_TMP_FOLDER=${ALPHANET_TMP_FOLDER:-"$TMP_FOLDER/alphanet"}
mkdir -p $ALPHANET_TMP_FOLDER
ALPHANET_SPEC_FOLDER=${ALPHANET_SPEC_FOLDER:-"$SPECS_FOLDER/alphanet"}
ALPHANET_ALLYCHAIN_EMBEDDED_SPEC=${ALPHANET_ALLYCHAIN_EMBEDDED_SPEC:-"$ALPHANET_SPEC_FOLDER/allychain-embedded-specs-v8.json"}
ALPHANET_ALLYCHAIN_SPEC_TEMPLATE=${ALPHANET_ALLYCHAIN_SPEC_TEMPLATE:-"$ALPHANET_SPEC_FOLDER/$ALLYCHAIN_SPEC_TEMPLATE_FILENAME"}
ALPHANET_ALLYCHAIN_SPEC_PLAIN=${ALPHANET_ALLYCHAIN_SPEC_PLAIN:-"$ALPHANET_BUILD_FOLDER/$ALLYCHAIN_SPEC_PLAIN_FILENAME"}
ALPHANET_ALLYCHAIN_SPEC_RAW=${ALPHANET_ALLYCHAIN_SPEC_RAW:-"$ALPHANET_BUILD_FOLDER/$ALLYCHAIN_SPEC_RAW_FILENAME"}
ALPHANET_ALLYCHAIN_SPEC_TMP=${ALPHANET_ALLYCHAIN_SPEC_TMP:-"$ALPHANET_TMP_FOLDER/allychain-tmp-spec.json"}
ALPHANET_BETANET_EMBEDDED_SPEC=${ALPHANET_BETANET_EMBEDDED_SPEC:-"$ALPHANET_SPEC_FOLDER/betanet-embedded-specs-v8.json"}
ALPHANET_BETANET_SPEC_TEMPLATE=${ALPHANET_BETANET_SPEC_TEMPLATE:-"$ALPHANET_SPEC_FOLDER/$BETANET_SPEC_TEMPLATE_FILENAME"}
ALPHANET_BETANET_SPEC_PLAIN=${ALPHANET_BETANET_SPEC_PLAIN:-"$ALPHANET_BUILD_FOLDER/$BETANET_SPEC_PLAIN_FILENAME"}
ALPHANET_BETANET_SPEC_RAW=${ALPHANET_BETANET_SPEC_RAW:-"$ALPHANET_BUILD_FOLDER/$BETANET_SPEC_RAW_FILENAME"}
ALPHANET_BETANET_SPEC_TMP=${ALPHANET_BETANET_SPEC_TMP:-"$ALPHANET_TMP_FOLDER/betanet-tmp-spec.json"}
ALPHANET_WASM=${ALPHANET_WASM:-"$ALPHANET_BUILD_FOLDER/$ALLYCHAIN_WASM_FILENAME"}
ALPHANET_GENESIS=${ALPHANET_GENESIS:-"$ALPHANET_BUILD_FOLDER/$ALLYCHAIN_GENESIS_FILENAME"}
ALPHANET_ALLYCHAIN_ID=${ALPHANET_ALLYCHAIN_ID:-"1000"}
ALPHANET_STAKERS=($(jq -r '.genesis.runtime.allychainStaking.candidates[] | .[0]' ${ALPHANET_ALLYCHAIN_SPEC_TEMPLATE}))
